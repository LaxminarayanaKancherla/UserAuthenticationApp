<div class="container mx-auto p-4 min-vh-100 bg-light">
  <div class="card shadow-sm mx-auto" style="max-width: 600px;">
    <div class="card-body p-4">
      <h2 class="text-2xl font-bold mb-4 font-poppins">Register</h2>
      <form [formGroup]="registerForm" (ngSubmit)="register()" class="row g-3">
        <div class="col-md-6 form-group" [ngClass]="{'focused': focusedFields.email || registerForm.get('email')?.value, 'error': registerForm.get('email')?.invalid && registerForm.get('email')?.touched}">
          <label for="email">Email</label>
          <input id="email" type="email" formControlName="email" class="form-control" (focus)="onFocus('email')" (blur)="onBlur('email')">
          <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="error-message">
            <span *ngIf="registerForm.get('email')?.hasError('required')">Email is required</span>
            <span *ngIf="registerForm.get('email')?.hasError('email')">Invalid email format</span>
          </div>
        </div>
        <div class="col-md-6 form-group" [ngClass]="{'focused': focusedFields.username || registerForm.get('username')?.value, 'error': registerForm.get('username')?.invalid && registerForm.get('username')?.touched}">
          <label for="username">Username</label>
          <input id="username" type="text" formControlName="username" class="form-control" (focus)="onFocus('username')" (blur)="onBlur('username')">
          <div *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched" class="error-message">
            <span *ngIf="registerForm.get('username')?.hasError('required')">Username is required</span>
            <span *ngIf="registerForm.get('username')?.hasError('minlength')">Username must be at least 3 characters</span>
          </div>
        </div>
        <div class="col-md-6 form-group" [ngClass]="{'focused': focusedFields.password || registerForm.get('password')?.value, 'error': registerForm.get('password')?.invalid && registerForm.get('password')?.touched}">
          <label for="password">Password</label>
          <input id="password" type="password" formControlName="password" class="form-control" (focus)="onFocus('password')" (blur)="onBlur('password')">
          <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="error-message">
            <span *ngIf="registerForm.get('password')?.hasError('required')">Password is required</span>
            <span *ngIf="registerForm.get('password')?.hasError('minlength')">Password must be at least 6 characters</span>
          </div>
        </div>
        <div class="col-md-6 form-group" [ngClass]="{'focused': focusedFields.phone || registerForm.get('phone')?.value, 'error': registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched}">
          <label for="phone">Phone</label>
          <input id="phone" type="text" formControlName="phone" class="form-control" (focus)="onFocus('phone')" (blur)="onBlur('phone')">
          <div *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched" class="error-message">
            <span *ngIf="registerForm.get('phone')?.hasError('required')">Phone is required</span>
            <span *ngIf="registerForm.get('phone')?.hasError('pattern')">Phone must be exactly 10 digits</span>
          </div>
        </div>
        <div class="col-md-6 form-group" [ngClass]="{'focused': focusedFields.age || registerForm.get('age')?.value || registerForm.get('age')?.value === 0, 'error': (registerForm.get('age')?.invalid || registerForm.get('age')?.hasError('invalidSymbols')) && registerForm.get('age')?.touched}">
          <label for="age">Age</label>
          <input id="age" type="text" formControlName="age" class="form-control" (focus)="onFocus('age')" (blur)="onBlur('age')">
          <div *ngIf="(registerForm.get('age')?.invalid || registerForm.get('age')?.hasError('invalidSymbols')) && registerForm.get('age')?.touched" class="error-message">
            <span *ngIf="registerForm.get('age')?.hasError('required')">Age is required</span>
            <span *ngIf="registerForm.get('age')?.hasError('min')">Age must be at least 18</span>
            <span *ngIf="registerForm.get('age')?.hasError('invalidSymbols')">Age cannot contain symbols</span>
          </div>
        </div>
        <div class="col-md-6 form-group" [ngClass]="{'focused': true}">
          <label for="image">Profile Image</label>
          <input id="image" type="file" accept="image/png,image/jpeg" (change)="onFileChange($event)" class="form-control">
          <p class="text-sm text-gray-600 mt-1">Please upload image size below 200KB</p>
        </div>
        <div class="col-12">
          <button type="submit" [disabled]="registerForm.invalid" class="btn btn-primary w-100">Register</button>
        </div>
      </form>
      <div *ngIf="registerError" class="mt-3 text-red-600 font-roboto text-center">{{ registerError }}</div>
    </div>
  </div>
</div>